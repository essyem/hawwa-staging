{% extends "public_base.html" %}
{% load static %}
{% load currency_filters %}

{# HRMS re-uses the public site header/footer. Put HRMS styles into extra_css #}
{% block extra_css %}
{{ block.super }}
<style>
    :root {
        --bg-primary: #1a237e;
        --bg-secondary: #3949ab;
        --bg-success: #2e7d32;
        --bg-info: #0277bd;
        --bg-warning: #f57f17;
        --bg-danger: #c62828;
        --text-primary: #1a237e;
        --navbar-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --card-bg: #ffffff;
        --card-border: #e3f2fd;
        --body-bg: #f8f9fa;
        --body-color: #212529;
    }
    [data-theme="dark"] {
        --card-bg: #2d3748;
        --card-border: #4a5568;
        --body-bg: #1a202c;
        --body-color: #e2e8f0;
        --navbar-bg: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
    }

    /* Small set of HRMS-specific tweaks kept from the old hrms_base */
    .hrms-sidebar {
        background: var(--card-bg);
        border-right: 1px solid var(--card-border);
        height: calc(100vh - 76px);
        position: sticky;
        top: 76px;
    }

    .hrms-sidebar .nav-link {
        color: var(--text-secondary, #6c757d);
        padding: 0.75rem 1rem;
        border-radius: 0;
        border-left: 3px solid transparent;
    }

    .hrms-sidebar .nav-link:hover { background: var(--card-bg); color: var(--text-primary); border-left-color: var(--qatar-maroon, #8b0000); }

    .hrms-sidebar .nav-link.active { background: var(--card-bg); color: var(--qatar-maroon, #8b0000); border-left-color: var(--qatar-maroon, #8b0000); font-weight: 600; }

    /* keep cards visually consistent with site theme */
    .hrms-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: .5rem; }
</style>
{% endblock %}

{# Main HRMS content re-uses the site's header and footer from public_base.html #}
{% block content %}
    {# include the left sidebar (for large screens) and show breadcrumbs/messages like before #}
    {% include 'includes/left_sidebar.html' %}

    {% if breadcrumbs %}
    <nav aria-label="breadcrumb" class="bg-light">
        <div class="container-fluid">
            <ol class="breadcrumb mb-0 py-2">
                {% for breadcrumb in breadcrumbs %}
                    {% if breadcrumb.url %}
                        <li class="breadcrumb-item"><a href="{{ breadcrumb.url }}">{{ breadcrumb.title }}</a></li>
                    {% else %}
                        <li class="breadcrumb-item active">{{ breadcrumb.title }}</li>
                    {% endif %}
                {% endfor %}
            </ol>
        </div>
    </nav>
    {% endif %}

    {% if messages %}
    <div class="container-fluid mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            <i class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}exclamation-triangle{% elif message.tags == 'warning' %}exclamation-circle{% else %}info-circle{% endif %}"></i>
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <main class="container-fluid mt-4">
        {% block hrms_content %}{% endblock %}
    </main>
{% endblock %}

{# keep extra_js block available for HRMS pages to append scripts #}
{% block extra_js %}
{{ block.super }}
{% endblock %}
